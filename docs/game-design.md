# 직장인 잔혹사 — 게임 디자인 문서

## 개요

- **장르**: 스토리 드리븐 미니게임 (WarioWare + 비주얼 노벨)
- **플랫폼**: 웹 (모바일 WebView / Steam Electron)
- **엔진**: Phaser 3 + React + TypeScript
- **해상도**: 960×540 (16:9 가로)
- **컨셉**: 직장인의 하루를 처음부터 끝까지 흘러가듯 플레이한다. 아침 7시 알람부터 밤 11시 퇴사까지, 중간에 멈출 수 없는 하루.

---

## 핵심 원칙

1. **스테이지 선택 없음** — 선형 스토리 모드. 하루는 멈추지 않는다.
2. **실패해도 계속 진행** — 재도전 없음. 실패하면 스트레스만 올라간다. 이게 직장이다.
3. **게임 사이에 내러티브** — 카카오톡 + 독백으로 공감과 웃음 제공.
4. **시간에 따른 분위기 변화** — 새벽→낮→저녁→밤 색상이 자연스럽게 변한다.
5. **공유 가능한 엔딩** — 결과 카드 + 등급 시스템으로 바이럴 유도.

---

## 게임 흐름

```
BootScene (타이틀)
  ↓  "출근하기" 클릭
NarrativeScene #0 (프롤로그 — 월요일 아침 06:59, 알림 폭탄)
  ↓  터치
MinigameIntroScene (3-2-1-GO 카운트다운)
  ↓
AlarmScene (미니게임 #1)
  ↓  성공/실패
ResultScene (간단 결과 → 2초 후 자동 진행)
  ↓
NarrativeScene #1 (08:30 — 사무실 도착 카톡)
  ↓
MinigameIntroScene → BootingScene → ResultScene
  ↓
NarrativeScene #2 ...
  ↓
... 10회 반복 ...
  ↓
EndingScene (결과 카드 + 등급 + 공유)
```

---

## 프롤로그 (쿠션)

게임이 시작되기 전, 플레이어를 세계에 몰입시키는 도입부.

### BootScene (타이틀)
- 아주 어두운 배경 + 미세 파티클 (새벽 먼지)
- "직장인" / "잔혹사" 타이틀이 천천히 페이드인
- 서브타이틀: "당신의 하루를 견뎌내세요"
- "출근하기" 버튼 — 부드러운 펄스
- 전체적으로 무겁고 분위기 있는 톤

### NarrativeScene #0 (프롤로그)
어두운 화면에서 시작:
1. "월요일" 텍스트 페이드인
2. 시계: "06:59 AM"
3. 카톡 알림이 하나씩 뜸:
   - 팀장님: "오늘 보고서 3시까지"
   - 동료 김대리: "오늘 회식이래ㅋㅋ"
   - 시스템: "내일까지 프로젝트 마감"
4. 속마음: "...5분만 더"
5. 알람: "07:00" (진동 효과)
6. "당신의 하루가 시작됩니다."
7. → 첫 번째 미니게임으로 전환

---

## 내러티브 시스템 (NarrativeScene)

### UI 구조
```
┌────────────────────────────────────────────────┐
│  08:30 AM                     스트레스 ████░░  │  ← 상단 바
│                                                │
│  ┌───────────────────────┐                     │
│  │ 🤵 팀장님             │                     │  ← 왼쪽 말풍선
│  │ "오늘 보고서 3시까지"   │                     │
│  └───────────────────────┘                     │
│                                                │
│                    ┌───────────────────────┐   │
│                    │ 네... 알겠습니다 😊   │   │  ← 오른쪽 말풍선
│                    └───────────────────────┘   │
│                                                │
│           ┌────────────────────┐               │
│           │ (속마음: 퇴사하고싶다) │               │  ← 중앙 독백
│           └────────────────────┘               │
│                                                │
│              [ 화면을 터치하세요 ]               │
└────────────────────────────────────────────────┘
```

### 메시지 타입
- **left**: 타인의 카톡 말풍선 (회색 배경)
- **right**: 나의 답장 (파란 배경)
- **thought**: 속마음/독백 (이탤릭, 중앙 정렬, 흐릿)
- **system**: 시스템 메시지/시간 알림 (작은 글씨, 중앙)

### 연출
- 메시지가 하나씩 0.4초 간격으로 등장 (슬라이드업 + 페이드인)
- 모든 메시지가 나온 후 "터치하세요" 프롬프트 표시
- 터치 시 → MinigameIntroScene으로 전환

---

## 10개 스테이지 내러티브

| # | 시간 | 게임 | 직전 내러티브 핵심 | 분위기 색상 |
|---|------|------|-------------------|------------|
| 1 | 07:00 | 알람 끄기 | 프롤로그: 알림 폭탄 + "5분만 더" | #0a0a14 새벽 |
| 2 | 08:30 | PC 부팅 | 팀장: "보고서 마감" / 나: (한숨) | #1a2a4e 아침 |
| 3 | 12:00 | 메뉴 룰렛 | 동료: "뭐 먹지?" → "아무거나" → "아무거나 말고" | #f5e6d0 점심 |
| 4 | 13:30 | 졸음 참기 | 팀장: "회의실 집합" / 속마음: "PPT 100장..." | #d5d8f0 식곤증 |
| 5 | 15:00 | 파일 찾기 | 팀장: "아까 그 파일 다시" / 나: "어느 최종이요?" | #c5c8d8 짜증 |
| 6 | 16:30 | 웹서핑 숨기기 | 속마음: "퇴근까지 1시간 30분..." + 핫딜 알림 | #b8bcc8 지루 |
| 7 | 18:00 | 노트북 충전 | 팀장: "야근 가능?" / 나: "네..." (😊→😭) | #2e1810 석양 |
| 8 | 20:00 | 모기 잡기 | "나만 남았네..." + 형광등 깜빡 + "윙~" | #12121e 밤 |
| 9 | 21:30 | 소맥 비율 | 팀장: "고생했어~ 한 잔 하자" / (거절 불가) | #2d1810 술자리 |
| 10 | 23:00 | 사직서 던지기 | "내일 아침 회의 추가" → "..." → "오늘이 마지막이다." | #1a0a0a→#e94560 결의 |

---

## 스트레스 시스템

### 게이지
- 0~100%, 화면 상단에 항상 표시
- 게임 성공: 스트레스 +5 (성공해도 직장 자체가 스트레스)
- 게임 실패: 스트레스 +15
- 내러티브 진행 시: 스트레스 +2 (시간이 지날수록 쌓임)

### 시각 효과
- 50% 이상: 화면 가장자리가 약간 붉어짐
- 80% 이상: 붉은 비네팅 강해짐 + 미세 흔들림
- 마지막 사직서 던지기: 높은 스트레스 = 더 센 파워 (분노의 힘!)

### 엔딩 반영
- 최종 스트레스 수치가 등급 계산에 사용됨

---

## 엔딩 시스템

### 결과 카드
```
┌─────────────────────────────────────────┐
│           🎊  퇴사 완료!  🎊            │
│                                         │
│    ┌─────────────────────────────┐      │
│    │  당신의 직장인 리포트        │      │
│    │                             │      │
│    │  출근      07:00            │      │
│    │  퇴근      23:00            │      │
│    │  생존율    7/10             │      │
│    │  스트레스  87%              │      │
│    │                             │      │
│    │  ── 등급 ──                 │      │
│    │  🔥 "번아웃 전사" 🔥        │      │
│    │  "퇴사 사유: 전부 다"       │      │
│    └─────────────────────────────┘      │
│                                         │
│    [ 🔄 다시 출근 ]                      │
└─────────────────────────────────────────┘
```

### 등급 테이블
| 등급 | 조건 | 코멘트 |
|------|------|--------|
| 🏆 해탈한 현자 | 10/10 + 스트레스 < 50 | "직장이 놀이터인 사람" |
| 😊 프로 직장인 | 10/10 + 스트레스 ≥ 50 | "다 해내긴 했는데... 괜찮으세요?" |
| 🔥 번아웃 전사 | 7~9/10 | "퇴사 사유: 전부 다" |
| 😤 분노의 직장인 | 4~6/10 | "오늘자 퇴사 예정자" |
| 💀 사회초년생 | 0~3/10 | "첫 출근인가요...?" |

---

## 색상 테마

### CSS 변수 (기존 유지 + 시간대별 확장)
```
--color-bg-primary: #0f0f23       (전체 배경)
--color-accent: #e94560           (강조/스트레스/위험)
--color-success: #00b894          (성공/안도)
--color-text-primary: #ffffff
--color-text-secondary: #aaaacc
--color-text-muted: #666688
```

### 시간대별 게임 내 배경
| 시간대 | 배경색 | 키워드 |
|--------|--------|--------|
| 07:00 새벽 | #0a0a14 | 어둡고 차가움 |
| 08:30 아침 | #1a2a4e | 형광등, 사무실 |
| 12:00 점심 | #f5e6d0 | 따뜻하고 밝음 |
| 13:30 오후 | #d5d8f0 | 나른, 뿌옇 |
| 15:00 오후 | #c5c8d8 | 칙칙, 지루 |
| 16:30 늦은오후 | #b8bcc8 | 회색, 무기력 |
| 18:00 저녁 | #2e1810 | 석양→어두워짐 |
| 20:00 밤 | #12121e | 깜깜, 외로움 |
| 21:30 술자리 | #2d1810 | 붉고 어두움 |
| 23:00 클라이맥스 | #1a0a0a | 어둠→결의 |

---

## 현재 구현된 미니게임 (10개)

| 스테이지 | 구현된 미니게임 | 메커닉 |
|---------|---------------|--------|
| 1 | 알람 0.1초 컷 | 반응속도 (타이밍) |
| 2 | PC 부팅 기다리기 | 연타 + 팝업 제거 |
| 3 | 메뉴 결정 장애 | 타이밍 (룰렛 멈추기) |
| 4 | 졸음 참기 | 연타 생존 |
| 5 | 파일 저장의 저주 | 탐색 (올바른 파일 찾기) |
| 6 | 웹서핑 숨기기 | 반응속도 (화면 전환) |
| 7 | 노트북 충전 | 추적 (움직이는 타겟) |
| 8 | 모기 잡기 | 정밀 탭 |
| 9 | 소맥 비율 | 정밀 게이지 |
| 10 | 사직서 던지기 | 파워 게이지 투척 |

---

## 기술 아키텍처

```
React (UI 레이어)
├── PageLayout (반응형 레이아웃)
├── LeftPanel (게임 소개, 조작법)
├── PhoneFrame → GameContainer (Phaser 캔버스)
├── RightPanel (하루 타임라인, 스트레스)
└── useGameState hook ← CustomEvent ← Phaser emitGameState()

Phaser (게임 레이어)
├── BootScene (타이틀)
├── NarrativeScene (카톡 내러티브) ← NEW
├── MinigameIntroScene (카운트다운)
├── [10개 미니게임 씬]
├── ResultScene (결과 → 자동 진행)
└── EndingScene (결과 카드)

GameManager (싱글톤)
├── currentStageIndex (0~9)
├── stress (0~100)
├── results[] (스테이지별 성공/실패)
├── advanceStage()
└── getGrade()
```

---

## 수정 파일 목록

### 신규
- `src/game/data/narrative.ts` — 10개 스테이지 내러티브 데이터
- `src/game/scenes/NarrativeScene.ts` — 카톡 스타일 내러티브 씬

### 수정
- `src/game/config.ts` — NarrativeScene 등록
- `src/game/GameManager.ts` — 스트레스, 선형 진행, 등급 계산
- `src/game/GameBridge.ts` — stress, time 추가
- `src/game/data/stages.ts` — 시간 정보 추가
- `src/types/game.ts` — StageDef에 time 필드 추가
- `src/game/scenes/BootScene.ts` — 분위기 있는 타이틀
- `src/game/scenes/MinigameIntroScene.ts` — 간소화 (카운트다운만)
- `src/game/scenes/ResultScene.ts` — 자동 진행 (버튼 제거)
- `src/game/scenes/EndingScene.ts` — 결과 카드 + 등급
- `src/ui/components/RightPanel.tsx` — 타임라인 + 스트레스
- `src/ui/components/LeftPanel.tsx` — 현재 시간대 표시
- `src/ui/hooks/useGameState.ts` — 새 필드 반영

### 삭제 (사용 안 함)
- `src/game/scenes/StageSelectScene.ts` — config에서 제거 (파일은 유지)
